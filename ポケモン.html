<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet" />
    <link rel="stylesheet" href="css/pokemon.css">
</head>

<body>
    <main>
        <div class="all">

            <div class="mypokemon">
                <link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
                <h2 id="tamesi">Choose your Starter</h2>
                <h2 id="tamesi">click Monster Ball!!</h2>
                <input type="radio" name="pokemonSelect" id="bulbasaur" />
                <input type="radio" name="pokemonSelect" id="charmander" />
                <input type="radio" name="pokemonSelect" id="squirtle" />

                <div class="pokeball-container">
                    <label id="hito" for="bulbasaur" class="pokeball bulbasaur"></label>
                    <label id="husi" for="charmander" class="pokeball charmander"></label>
                    <label id="zeni" for="squirtle" class="pokeball squirtle"></label>

                </div>

                <div class="poke-container">
                    <div class="poke"></div>
                </div>
                <section class="button_section">
                    <button id="button1" onclick="doreka()" value="0">フシギダネ!<br>キミに決めた!</button>
                    <button id="button2" onclick="doreka()" value="1">ヒトカゲ!<br>キミに決めた!</button>
                    <button id="button3" onclick="doreka()" value="2">ゼニガメ!<br>キミに決めた!</button>
                </section>
            </div>
            <div id="resultTable">
                <link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
                <h1 id="VS" class="VS">VS</h1>

                <div>
                    <link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet'
                        type='text/css'>
                    <h2>Enemy Monster</h2>


                    <div class="poke-container1" id="poke-container1">
                        <p>
                            <img src="./images/img1.png" alt="" id="area1" />
                        </p>
                    </div>

                </div>

            </div>
    </main>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>

        main.js
        'use strict';

        (() => {
            const hands = ['フシギダネ!<br>キミに決めた!', 'ヒトカゲ! < br > キミに決めた!', 'ゼニガメ! < br > キミに決めた!'];
            const resultText = ['『効果はバツグンだ』', '『効果はいまひとつのようだ、反撃された』', '『相打ちだ』'];

            // 値を取得する
            const count = document.getElementById('gameCount');
            let countResult = count.innerHTML;
            const button1 = document.getElementById('button1');
            const button2 = document.getElementById('button2');
            const button3 = document.getElementById('button3');
            const myHandType = document.getElementById('myHand');
            const enemyHandType = document.getElementById('enemyHand');
            const result = document.getElementById('result');
            const reset = document.getElementById('reset');
            const winCount = document.getElementById('winCount')
            const loseCount = document.getElementById('loseCount')
            const winRate = document.getElementById('winRate');

            //試合数、勝ち数、負け数
            let gameCount = 0;
            let winResult = 0;
            let loseResult = 0;

            //試合数書き換え
            const gameCountReplace = (gameCount) => {
                countResult = countResult.replace(countResult, gameCount);
                count.textContent = countResult;
            }

            const alert = (winResult, loseResult) => {
                if (winResult > loseResult) {
                    window.alert('逆転しました！');
                } else if (winResult < loseResult) {
                    window.alert('押されています！');
                } else {
                    window.alert('次に進みましょう！');
                }
            }

            //リセットボタン表示とreload()関数呼び出し
            const resetClick = () => {
                //ボタン要素作成
                const resetBtn = document.createElement('input');
                resetBtn.type = 'button';
                resetBtn.value = '更新';
                reset.appendChild(resetBtn); //親要素(reset)の子要素にボタンを配置する

                resetBtn.addEventListener('click', () => { //更新ボタンを押下後、画面リロードする
                    location.reload();
                })
            }

            //10回到達したらボタンを非活性にする
            const inactive = () => {
                button1.disabled = true;
                button2.disabled = true;
                button3.disabled = true;
            }

            //勝率計算
            const winRateCalc = (gameCount, winCount) => {
                const winRateResult = (winCount / gameCount) * 100;
                winRate.textContent = `${winRateResult}%`;
            }

            //ボタン押下関数
            const onClick = (event) => {
                const myHand = Number(event.target.value); //取得するvalue値はstring型のため、Number型に変換

                function doreka() {
                    let a = Math.random() * 3;
                    let n = Math.floor(a) + 1;
                    let enemyHand = "images/img" + n + ".png";
                    document.getElementById("area1").src = enemyHand;
                    console.log(n);

                    myHandType.textContent = `自分の出した手：${hands[myHand]}`;
                    enemyHandType.textContent = `相手の出した手：${hands[enemyHand]}`;

                    //勝敗判定
                    const handResult = (myHand - enemyHand + 3) % hands.length;

                    if (handResult === 2) {
                        result.textContent = resultText[0];
                        gameCount++;
                        winResult++;
                        gameCountReplace(gameCount);

                    } else if (handResult === 1) {
                        result.textContent = resultText[1];
                        gameCount++;
                        loseResult++;
                        gameCountReplace(gameCount);

                    } else {
                        result.textContent = resultText[2];
                    }

                    if (gameCount === 10) { //試合数が１０回に到達したら実行される処理
                        winCount.textContent = `${winResult}回`;
                        loseCount.textContent = `${loseResult}回`;
                        winRateCalc(gameCount, winResult);
                        alert("Time UP" && winResult, loseResult)
                        inactive();
                        resetClick();
                    }
                }

                // クリックした時の挙動はどのボタンも同じなので、関数を共通化
                button1.addEventListener('click', onClick);
                button2.addEventListener('click', onClick);
                button3.addEventListener('click', onClick);

            })();






        // 'use strict';
        // const img = ["./images/img1.png", "./images/img2.png", "./images/img3.png"];
        // let count = -1;
        // picChange(); // 関数を実行
        // function picChange() {
        //     count++;
        //     // カウントが最大になれば配列を初期値に戻すため「0」を指定する
        //     if (count == img.length) count = 0;
        //     // 画像選択
        //     document.getElementById("area1").src = img[count];
        //     // 1秒ごとに実行
        //     setTimeout("picChange()", 100);

        // // }
        // $(function () {
        //     $(".txt").click(function () {
        //         $(".ci-txt").show();
        //     });
        // });

        // $(function () {
        //     $(".txt").click(function () {
        //         $(".ci-txt").show();
        //     });
        // });

        // $(function () {
        //     $(".txt").click(function () {
        //         $(".ci-txt").show();
        //     });
        // });



        // function doreka() {
        //     let a = Math.random() * 3;
        //     let n = Math.floor(a) + 1;
        //     let tekinopokemon = "images/img" + n + ".png";
        //     document.getElementById("area1").src = tekinopokemon;
        //     console.log(n);
        //     //             const btn1 = document.getElementById("images/img1.png");
        //     //             const btn2 = document.getElementById("images/img2.png");
        //     //             const btn3 = document.getElementById("images/img3.png");
        //     // btn1.z-index

        //     // function fsChangeLarge() {
        //     //     let fs = document.getElementById("#VS");
        //     //     fs.style.fontSize = "100px";
        //     // }
        //     function fsChangeSmall() {
        //         let fs = document.getElementById("#VS");
        //         fs.style.fontSize = "40px";
        //     }


        //     $("#button1").on("click", function () {
        //         // changeImage("./images/img1.png")
        //         // setActiveButton(btn1);


        //         if (n === 1) { $("#VS").text("効果はいまひとつのようだ"); }
        //         else if (n === 2) { $("#VS").text("引き分けだ"); }
        //         else { $("#VS").text("効果はバツグンだ！"); }
        //     });


        //     $("#button2").on("click", function () {
        //         // changeImage("./images/img1.png")
        //         // setActiveButton(btn2);


        //         if (n === 1) { $("#VS").text("引き分けだ"); }
        //         else if (n === 2) { $("#VS").text("効果はバツグンだ！"); }
        //         else { $("#VS").text("効果はいまひとつのようだ"); }
        //     });


        //     $("#button3").on("click", function () {
        //         // changeImage("./images/img1.png")
        //         // setActiveButton(btn3);


        //         if (n === 1) { $("#VS").text("効果はバツグンだ！"); }
        //         else if (n === 2) { $("#VS").text("効果はいまひとつのようだ"); }
        //         else { $("#VS").text("引き分けだ"); }
        //     });
        // }


    </script>


</body>

</html>